#!/bin/sh

# Block direct pushes - only allow via /publish-all command
if [ "$MYOPERATOR_GIT_ALLOWED" != "1" ]; then
  echo ""
  echo "╔══════════════════════════════════════════════════════════════════╗"
  echo "║                    ⛔ PUSH BLOCKED ⛔                            ║"
  echo "╠══════════════════════════════════════════════════════════════════╣"
  echo "║                                                                  ║"
  echo "║  Direct 'git push' is not allowed in this repository.           ║"
  echo "║                                                                  ║"
  echo "║  Use the /publish-all command instead, which ensures:           ║"
  echo "║    ✓ Proper version management                                  ║"
  echo "║    ✓ All validations pass                                       ║"
  echo "║    ✓ Correct commit messages                                    ║"
  echo "║    ✓ Synchronized package versions                              ║"
  echo "║                                                                  ║"
  echo "╚══════════════════════════════════════════════════════════════════╝"
  echo ""
  exit 1
fi

echo "✓ Push authorized via /publish-all"
